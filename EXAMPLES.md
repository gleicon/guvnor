# Guv'nor Examples

> Real-world examples of deployment with **Procfile** and process management features

## Quick Start Examples

### Zero Configuration Deployment
```bash
# Just works - auto-detect and run!
guvnor init                 # Setup everything
guvnor start                # Start all processes
```

### Procfile-Based Deployment (Heroku/Foreman Compatible)
```bash
# Generate smart Procfile from detected apps
guvnor init

# Start processes using Procfile
guvnor start                # Start all processes
guvnor restart web          # Restart specific process
```

### Interactive Management
```bash
# Interactive shell for process management
guvnor shell

# In shell:
guvnor> status              # Show all processes
guvnor> start web           # Start web process
guvnor> stop worker         # Stop worker process
guvnor> restart web         # Restart web process
guvnor> quit                # Exit shell
```

## Procfile Examples

### Basic Node.js Application
```procfile
# Procfile - Generated by Guv'nor
web: node server.js
worker: node worker.js
clock: node scheduler.js
```

### Python Application (Django + Celery)
```procfile
# Django with background workers
web: gunicorn myproject.wsgi:application --bind 0.0.0.0:$PORT
worker: celery -A myproject worker --loglevel=info
beat: celery -A myproject beat --loglevel=info
```

### Multi-Service Architecture
```procfile
# Frontend and API services  
web: npm start
api: python -m uvicorn main:app --host 0.0.0.0 --port $PORT
worker: python worker.py
redis: redis-server --port 6379
```

### Full Stack Development
```procfile
# Complete development environment
frontend: npm run dev
backend: python manage.py runserver 0.0.0.0:8000
worker: celery -A backend worker
redis: redis-server
postgres: postgres -D /usr/local/var/postgres
```

## Real-World Workflows

### Development Workflow
```bash
# 1. Initialize and auto-detect applications
cd my-project
guvnor init

# Output:
# Initializing Guv'nor in: .
# Detecting applications...
# Found 3 applications:
#   - my-api (python)
#   - my-web (nodejs)  
#   - my-worker (python)
# Created: Procfile
# Created: .env
# Created: guvnor.yaml

# 2. Start all processes
guvnor start

# 3. Manage individual processes
guvnor restart api
guvnor stop worker
guvnor status
```

### Production Deployment
```bash
# 1. Deploy with automatic TLS
export DOMAIN=myapp.com
export EMAIL=admin@myapp.com
guvnor start --domain $DOMAIN --email $EMAIL

# 2. Monitor and manage
guvnor status
guvnor shell
```

### Migration from Other Tools

#### From docker-compose
```bash
# Old way
docker-compose up -d

# New way (Guv'nor automatically detects everything)
guvnor init
guvnor start
```

#### From Heroku
```bash
# Use existing Procfile
guvnor start

# Validate configuration first
guvnor validate
```

#### From supervisord
```bash
# Create Procfile from detected apps
guvnor init

# Interactive management
guvnor shell
```

## Advanced Examples

### Environment-Specific Configuration

**guvnor.yaml (Development)**
```yaml
server:
  http_port: 8080
  https_port: 8443
  log_level: debug
tls:
  enabled: false
apps:
  - name: web
    command: npm
    args: ["run", "dev"]
    port: 3000
  - name: api
    command: python
    args: ["manage.py", "runserver", "0.0.0.0:8000"]
    port: 8000
```

**guvnor.yaml (Production)**
```yaml
server:
  http_port: 80
  https_port: 443
  log_level: info
tls:
  enabled: true
  auto_cert: true
  email: admin@myapp.com
apps:
  - name: web
    command: gunicorn
    args: ["myapp.wsgi:application", "--bind", "0.0.0.0:3000"]
    port: 3000
  - name: api
    command: gunicorn
    args: ["api.wsgi:application", "--bind", "0.0.0.0:8000"]
    port: 8000
```

### Complex Multi-Service Example
```procfile
# Complete SaaS application
web: gunicorn app.wsgi --bind 0.0.0.0:$PORT --workers 4
api: uvicorn api.main:app --host 0.0.0.0 --port 8000 --workers 2
worker_high: celery -A app worker -Q high_priority --concurrency=2
worker_low: celery -A app worker -Q low_priority --concurrency=1
beat: celery -A app beat
redis: redis-server --port 6379 --maxmemory 256mb
postgres: postgres -D /var/lib/postgresql/data
nginx: nginx -g "daemon off;"
```

### Microservices Architecture
```procfile
# API Gateway and services
gateway: node gateway.js
auth_service: python -m auth.main --port 8001
user_service: python -m users.main --port 8002  
order_service: python -m orders.main --port 8003
notification_service: python -m notifications.main --port 8004
worker: python worker.py
redis: redis-server
```

## CLI Command Examples

### Process Management
```bash
# Start all processes
guvnor start

# Stop all processes
guvnor stop

# Restart with zero downtime
guvnor restart web

# Show detailed status
guvnor status

# Interactive mode
guvnor shell
```

### Configuration Operations
```bash
# Initialize smart configuration
guvnor init

# Validate configuration
guvnor validate

# Show process logs
guvnor logs
guvnor logs web

# Follow logs in real-time
guvnor logs -f
```

## Monitoring Examples

### Real-time Process Monitoring
```bash
# Interactive shell with real-time updates
guvnor shell

guvnor> status
Process Status:
PROCESS      STATUS   PID      COMMAND
-------      ------   ---      -------
web          running  1234     gunicorn app.wsgi
worker       running  1235     celery -A app worker
redis        running  1236     redis-server

guvnor> restart redis
Restarting process: redis

guvnor> status
Process Status:
PROCESS      STATUS   PID      COMMAND
-------      ------   ---      -------
web          running  1234     gunicorn app.wsgi
worker       running  1235     celery -A app worker
redis        running  1237     redis-server
```

### Health Check Integration
```yaml
# guvnor.yaml with health checks
apps:
  - name: web
    command: gunicorn
    args: ["app.wsgi:application"]
    port: 8000
    health_check:
      enabled: true
      path: /health
      interval: 30s
      timeout: 5s
      retries: 3
    restart_policy:
      enabled: true
      max_retries: 5
      backoff: 3s
```

## Integration Examples

### CI/CD Pipeline
```yaml
# .github/workflows/deploy.yml
name: Deploy with Guv'nor
on:
  push:
    branches: [main]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Install Guv'nor
        run: |
          curl -sSL https://github.com/gleicon/guvnor/install.sh | bash
      - name: Deploy
        run: |
          guvnor start --domain ${{ secrets.DOMAIN }} --email ${{ secrets.EMAIL }}
        env:
          EMAIL: ${{ secrets.EMAIL }}
```

### Docker Integration
```dockerfile
# Dockerfile
FROM golang:1.21 as builder
COPY . .
RUN go build -o guvnor ./cmd/guvnor

FROM alpine:latest
RUN apk add --no-cache ca-certificates
COPY --from=builder /app/guvnor /usr/local/bin/
COPY Procfile .
COPY guvnor.yaml .
CMD ["guvnor", "start"]
```

### Systemd Integration
```bash
# Install as system service
sudo cp guvnor /usr/local/bin/
sudo systemctl enable guvnor
sudo systemctl start guvnor
```

## Performance Examples

### Fast Startup
```bash
# Startup performance
time guvnor start

# Output:
# Starting Guv'nor server...
# Server started successfully
# Processes: 3
# Press Ctrl+C to stop
# 
# real    0m0.156s  # Sub-second startup
# user    0m0.023s
# sys     0m0.019s
```

### Resource Efficiency
```bash
# Memory usage monitoring
guvnor status

# Shows actual resource usage per process
# Efficient native Go process management
# No container overhead
```

## Use Case Examples

### Solo Developer
```bash
# Perfect for single developer projects
cd my-side-project
guvnor init                 # Setup development environment
guvnor start                # Start all services
guvnor start --domain myapp.io --email me@example.com  # Production deployment
```

### Small Team
```bash
# Team development with consistent environment
git clone project
guvnor init                 # Same environment for everyone
guvnor validate             # Check configuration
guvnor start                # Start development servers
```

### Production Deployment  
```bash
# Replace complex infrastructure setup
# Simple single-binary deployment
guvnor start --domain production.com --email admin@production.com
```

### Microservices
```bash
# Manage complex service architecture
guvnor init                 # Auto-detect all services
guvnor validate             # Ensure configuration is valid
guvnor start                # Start entire service mesh
guvnor shell                # Monitor and debug interactively
```

---

<p align="center">
<strong>From zero to production in seconds</strong><br>
<em>Simple, fast, and reliable process management with automatic TLS</em>
</p>

## Next Steps

- **Try it:** `guvnor init` in your project
- **Read Docs:** [README.md](README.md)
- **Get Help:** `guvnor --help` 
- **Community:** [GitHub Discussions](https://github.com/gleicon/guvnor/discussions)